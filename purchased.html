<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>History</title>
    <link rel="stylesheet" href="./assets/css/style.css">
    <!-- 
      - google font link
    -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&family=Open+Sans&display=swap"
        rel="stylesheet">
</head>

<body>

    <header class="header" data-header style="background-color:azure;">
        <div class="container">

            <div class="overlay" data-overlay></div>

            <a href="#" class="logo">
                <!-- <img src="./assets/images/logo.svg" alt="Ridex logo"> -->
            </a>
            <nav class="navbar" data-navbar style="background-color: azure;">
                <ul class="navbar-list">
                    <li>
                        <a href="index.html" class="navbar-link" data-nav-link>Home</a>
                    </li>
                    <li>
                        <a href="cars.html" class="navbar-link" data-nav-link>Explore cars</a>
                    </li>
                    <li>
                        <a href="#" class="navbar-link" data-nav-link>About us</a>
                    </li>
                    <li>
                        <a href="purchased.html" class="navbar-link" data-nav-link>History</a>
                    </li>
                </ul>
            </nav>

            <div class="header-actions">

                <div class="header-contact">
                    <!-- <a href="tel:88002345678" class="contact-link">8 800 234 56 78</a> -->

                    <!-- <span class="contact-time">Mon - Sat: 9:00 am - 6:00 pm</span> -->
                </div>

                <a href="sign up.html" class="btn" aria-labelledby="aria-label-txt">
                    <ion-icon name="car-outline"></ion-icon>
                    <span id="aria-label-txt">Sign Up</span>
                </a>

                <a href="sign in.html" class="btn user-btn" aria-label="Profile">
                    <ion-icon name="person-outline"></ion-icon>
                    <span id="aria-label-txt">Sign In</span>

                </a>

                <button class="nav-toggle-btn" data-nav-toggle-btn aria-label="Toggle Menu">
                    <span class="one"></span>
                    <span class="two"></span>
                    <span class="three"></span>
                </button>

            </div>

        </div>
    </header>
    <br>
    <br>
    <br>
    <br>


    <h1>History</h1>
    <h5>User Name</h5>
    <div id="valuesContainer">
        
    </div>


    <script>
        // Retrieve all values from local storage
        const values = Object.values(localStorage);

        // Create a HTML list to display the values
        const list = document.createElement('ul');
let counter=0;
        // Iterate over the values and create list items
        values.forEach(value => {
            const listItem = document.createElement('li');

            try {
                const parsedValue = JSON.parse(value);

                // Check if the value is in the expected format
                if (
                    typeof parsedValue === 'object' &&
                    parsedValue !== null &&
                    Object.keys(parsedValue).length === 1 &&
                    parsedValue.hasOwnProperty('undefined') &&
                    Array.isArray(parsedValue.undefined.purchases)
                ) {
                    const purchasedItems = parsedValue.undefined.purchases;

                    // Create nested list items for purchased items
                    const nestedList = document.createElement('ul');
                    purchasedItems.forEach(item => {
                        const nestedListItem = document.createElement('li');
                        nestedListItem.textContent = item;
                        nestedList.appendChild(nestedListItem);
                    });

                    listItem.appendChild(nestedList);
                } else {
                    listItem.textContent = value;
                }
            } catch {
                listItem.textContent = value;
            }
            if(counter!=1)
            {
                list.appendChild(listItem);
            }
            // Append the list item to the list
            
            if(counter==1)
            {
                const nested0= document.createElement('br');
                list.appendChild(nested0);
                listItem.textContent += 'Password';
                list.appendChild(listItem);
                const nested= document.createElement('br');
                list.appendChild(nested);
            }
            
            counter++;
        });

        // Display the list in the valuesContainer
        const valuesContainer = document.getElementById('valuesContainer');
        valuesContainer.appendChild(list);
    </script>



</body>

</html>